document.addEventListener("DOMContentLoaded",()=>{let e=document.querySelector(".login-form"),n=document.getElementById("loginFeedback"),a=document.querySelector('input[name="_csrf_token"]').value;e&&n&&e.addEventListener("submit",async t=>{t.preventDefault(),n.textContent="Enviando...",n.style.color="#fff",n.style.transition="opacity 0.3s ease",n.style.opacity="1";t=new FormData(e);t.append("_csrf_token",a);try{var o=await fetch("/admin/signIn",{method:"POST",body:t,headers:{"X-Requested-With":"XMLHttpRequest"}});let e=await o.json();o.ok&&e.success?(n.textContent=e.message||"Login realizado com sucesso!",n.style.color="#e50914",setTimeout(()=>{window.location.href=e.redirect||"/admin/home"},1500)):(n.textContent=e.message||"E-mail ou senha invÃ¡lidos.",n.style.color="#ff4d4d",setTimeout(()=>{window.location.href=e.redirect||"/admin/login"},1500))}catch(e){n.textContent="Erro ao conectar. Tente novamente.",n.style.color="#ff4d4d",console.error("Erro:",e),setTimeout(()=>{window.location.href="/admin/login"},1500)}})});