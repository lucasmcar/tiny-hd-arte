function initializeTinyMCE(){var e;console.log("Inicializando TinyMCE..."),"undefined"==typeof tinymce?(console.error("TinyMCE não está definido. Tentando novamente em 100ms..."),setTimeout(initializeTinyMCE,100)):(e=document.getElementById("content"))?null!==e.offsetParent?(console.log("TinyMCE encontrado e elemento #content presente e visível. Configurando o editor..."),tinymce.get("content")&&(console.log("Removendo instância anterior do TinyMCE..."),tinymce.get("content").remove()),tinymce.init({selector:"#content",plugins:"advlist autolink lists link image charmap preview anchor searchreplace visualblocks code fullscreen insertdatetime media table",toolbar:"undo redo | styles | bold italic underline | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image | code",menubar:!0,height:400,license_key:"gpl",images_upload_handler:(t,e)=>new Promise((n,o)=>{var e=new FormData;e.append("file",t.blob(),t.filename()),fetch("/uploadImage",{method:"POST",body:e,headers:{"X-CSRF-Token":document.querySelector('input[name="_csrf_token"]')?.value}}).then(e=>e.json()).then(e=>{e.location?n(e.location):o({message:"Erro ao fazer upload da imagem",remove:!0})}).catch(e=>{o({message:"Erro ao fazer upload da imagem: "+e.message,remove:!0})})}),setup:n=>{console.log("Editor TinyMCE configurado com sucesso."),n.on("init",()=>{console.log("Editor TinyMCE inicializado com sucesso.");var e=document.querySelector(".tox-tinymce");e&&(e.style.display="block",e.style.visibility="visible"),n.focus()}),n.on("error",e=>{console.error("Erro na inicialização do TinyMCE:",e.message)})}}),(e=document.getElementById("saveBtn"))?e.addEventListener("click",function(){console.log("Botão Salvar clicado.");var e=document.getElementById("title").value,n=tinymce.get("content")?tinymce.get("content").getContent():"";e&&n?fetch("/saveContent",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-Token":document.querySelector('input[name="_csrf_token"]')?.value},body:JSON.stringify({title:e,content:n})}).then(e=>e.json()).then(e=>{e.success?(alert(e.success),document.getElementById("title").value="",tinymce.get("content").setContent("")):alert(e.error)}).catch(e=>{console.error("Erro ao salvar conteúdo:",e),alert("Erro ao salvar conteúdo.")}):alert("Por favor, preencha o título e o conteúdo.")}):console.error("Botão #saveBtn não encontrado no DOM.")):(console.warn("Elemento #content não está visível no DOM. Tentando novamente em 100ms..."),setTimeout(initializeTinyMCE,100)):(console.error("Elemento #content não encontrado no DOM. Tentando novamente em 100ms..."),setTimeout(initializeTinyMCE,100))}function initializeTinyMCEOnDynamicLoad(){console.log("Inicializando TinyMCE em contexto dinâmico..."),initializeTinyMCE()}document.addEventListener("DOMContentLoaded",function(){console.log("DOM carregado. Iniciando inicialização do TinyMCE..."),initializeTinyMCE()}),window.initializeTinyMCEOnDynamicLoad=initializeTinyMCEOnDynamicLoad;