document.addEventListener("DOMContentLoaded",function(){if("/admin/login"===window.location.pathname)fabToggle.setAttribute("hidden"),(d=document.getElementById("session-timer"))&&d.classList.add("hidden");else if(isLoggedIn&&0!==tokenExpiry){let e=document.getElementById("timer"),t=document.getElementById("modal-timer"),a=new bootstrap.Modal(document.getElementById("session-expiry-modal"),{backdrop:"static",keyboard:!1});var d=Math.floor(Date.now()/1e3);let o=tokenExpiry-d,n=!1,i,s=setInterval(()=>{if(o--,e.textContent=u(o),300===o){a.show();let e=300;i=setInterval(()=>{e--,t.textContent=u(e),e<=0&&clearInterval(i)},1e3)}o<=0&&(clearInterval(s),n||(n=!0,fetch("/admin/logout",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('input[name="_csrf_token"]')?.value}}).then(e=>e.json()).then(e=>{e.success?(localStorage.removeItem("jwt"),sessionStorage.removeItem("jwt")):console.error("Erro ao fazer logout:",e.message),window.location.href="/admin/login?loggedOut=true"}).catch(e=>{console.error("Erro ao fazer logout:",e),window.location.href="/admin/login?loggedOut=true"})))},1e3),l=(e.textContent=u(o),document.getElementById("sidebar")),r=document.getElementById("toggle-sidebar"),c=document.getElementById("main-content");function u(e){var t=Math.floor(e/3600),a=Math.floor(e%3600/60),e=e%60;return`${t.toString().padStart(2,"0")}:${a.toString().padStart(2,"0")}:`+e.toString().padStart(2,"0")}r.addEventListener("click",()=>{l.classList.toggle("active"),c.classList.toggle("shifted"),r.setAttribute("aria-expanded",l.classList.contains("active"))}),document.querySelectorAll(".accordion-toggle").forEach(a=>{a.addEventListener("click",e=>{e.preventDefault();var e=a.nextElementSibling,t=e.classList.contains("active");document.querySelectorAll(".accordion-menu").forEach(e=>e.classList.remove("active")),document.querySelectorAll(".accordion-toggle").forEach(e=>e.classList.remove("active")),t||(a.classList.add("active"),e.classList.add("active")),a.setAttribute("aria-expanded",!t)})})}else(d=document.getElementById("session-timer"))&&d.classList.add("hidden")});let menuData=[{label:"Dashboard",icon:"bi-house-door",route:"/admin/dashboard"},{label:"Consultoria",icon:"bi-briefcase",submenu:[{label:"Cadastro",route:"/consultoria"},{label:"Registros",route:"/consultoria/lista"}]},{label:"Equipe",icon:"bi-person-vcard-fill",submenu:[{label:"Cadastro",route:"/equipe/cadastro"},{label:"Registros",route:"/equipe/lista"}]},{label:"Destão de Projetos",icon:"bi-tools",submenu:[{label:"Cadastros",icon:"bi-clipboard-data",route:"projetos-culturais"},{label:"Registros",icon:"bi-list",route:"projetos-culturais/listaProjetos"},{label:"Projetos Em Captação",icon:"bi-plus-circle",route:"projetos-captacao"}]}],fabToggle=document.getElementById("fab-menu-toggle"),fabSidebar=document.getElementById("fab-sidebar"),fabIcon=document.getElementById("fab-icon"),menuContainer=document.getElementById("fab-menu-items"),isSidebarOpen=!1;function createMenu(){menuData.forEach(e=>{var t=document.createElement("li");e.submenus?t.innerHTML=`
      <a href="#" class="menu-item has-submenu">
        <i class="${e.icon}"></i>
        ${e.label}
        <span class="submenu-toggle">+</span>
      </a>
      <ul class="submenu">
        ${e.submenus.map(e=>`
          <li>
            <a href="${e.link}">
              <i class="${e.icon}"></i> ${e.label}
            </a>
          </li>
        `).join("")}
      </ul>
    `:t.innerHTML=`
      <a href="${e.link}" class="menu-item">
        <i class="${e.icon}"></i>
        ${e.label}
      </a>
    `,menuContainer.appendChild(t)})}fabToggle.addEventListener("click",()=>{isSidebarOpen=!isSidebarOpen,fabSidebar.classList.toggle("open",isSidebarOpen),fabSidebar.setAttribute("aria-hidden",!isSidebarOpen),fabIcon.className=isSidebarOpen?"bi bi-x":"bi bi-list"}),document.addEventListener("DOMContentLoaded",createMenu);