function attachServiceEvents(){document.querySelectorAll(".btn-edit").forEach(e=>{e.addEventListener("click",function(){var e=this.getAttribute("data-service-id"),t=this.closest(".table-row"),c=t.querySelector(".table-cell:nth-child(1) i").className.replace("bi ",""),o=t.querySelector(".table-cell:nth-child(2)").textContent,t=t.querySelector(".table-cell:nth-child(3)").textContent;document.getElementById("editServiceId").value=e,document.getElementById("editIcon").value=c,document.getElementById("editTitle").value=o,document.getElementById("editDescription").value=t})}),document.querySelectorAll(".btn-delete").forEach(e=>{e.addEventListener("click",function(){let t=this.getAttribute("data-service-id");confirm("Tem certeza que deseja excluir este serviço?")&&fetch("/admin/servicos/"+t,{method:"DELETE",headers:{"X-Requested-With":"XMLHttpRequest"}}).then(e=>{if(!e.ok)throw new Error("Erro ao excluir serviço");this.closest(".table-row").remove(),console.log(`Serviço ${t} excluído`)}).catch(e=>console.error("Erro:",e))})}),document.getElementById("saveNewService").addEventListener("click",function(){var e=document.getElementById("addServiceForm"),e=new FormData(e),e=Object.fromEntries(e);fetch("/admin/servicos",{method:"POST",headers:{"X-Requested-With":"XMLHttpRequest","Content-Type":"application/json"},body:JSON.stringify(e)}).then(e=>{if(e.ok)return e.json();throw new Error("Erro ao adicionar serviço")}).then(e=>{document.querySelector(".table-body").insertAdjacentHTML("beforeend",`
                <div class="table-row" data-service-id="${e.id||Date.now()}">
                    <div class="table-cell"><i class="bi ${e.icone}"></i></div>
                    <div class="table-cell">${e.titulo}</div>
                    <div class="table-cell">${e.descricao}</div>
                    <div class="table-cell">
                        <button class="btn-edit" onclick="document.getElementById('editServiceModal').classList.add('show')" data-service-id="${e.id||Date.now()}">Editar</button>
                        <button class="btn-delete" data-service-id="${e.id||Date.now()}">Excluir</button>
                    </div>
                </div>
            `),document.getElementById("addServiceModal").classList.remove("show"),attachServiceEvents()}).catch(e=>console.error("Erro:",e))}),document.getElementById("saveEditService").addEventListener("click",function(){var e=document.getElementById("editServiceForm"),e=new FormData(e),e=Object.fromEntries(e);let c=e.id;fetch("/admin/servicos/"+c,{method:"PUT",headers:{"X-Requested-With":"XMLHttpRequest","Content-Type":"application/json"},body:JSON.stringify(e)}).then(e=>{if(e.ok)return e.json();throw new Error("Erro ao editar serviço")}).then(e=>{var t=document.querySelector(`.table-row[data-service-id="${c}"]`);t.querySelector(".table-cell:nth-child(1) i").className="bi "+e.icone,t.querySelector(".table-cell:nth-child(2)").textContent=e.titulo,t.querySelector(".table-cell:nth-child(3)").textContent=e.descricao,document.getElementById("editServiceModal").classList.remove("show")}).catch(e=>console.error("Erro:",e))})}console.log("Services JS carregado"),attachServiceEvents();